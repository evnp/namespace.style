"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(a){for(var r,e=1,i=arguments.length;e<i;e++){r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractNameEnumData=exports.omitEnumReverseMappings=exports.composeClass=void 0;var defaultConfig={elementSeparator:"-",conditionalSeparator:"--",strictBoolChecks:!0},config=__assign({},defaultConfig);function toStringError(){throw new Error("Do not coerce to string directly; use .c (.class) or .s (.string)")}function enss(a,r,e,i){var n,y=function(){return config.elementSeparator},p=function(){return config.conditionalSeparator};if(a=omitEnumReverseMappings(a),r=omitEnumReverseMappings(r),e=omitEnumReverseMappings(e),typeof i=="function"){var f={};i=(n=i(f))!==null&&n!==void 0?n:f}var N=extractNameEnumData(a,i),t=N[0],b=N[1];function x(u){var o=u[0],s=u[1],l=O.get(o);return l?!s||s===o?[o,l]:[o,s+" "+l]:(typeof s=="string"&&s.length?O.set(o,s):O.set(o,null),[o,s])}var D=Object.entries(i!=null?i:[]),O=new Map(D);t&&O.set(t,b!=null?b:null),r=Object.fromEntries(Object.entries(r!=null?r:{}).map(x)),e=Object.fromEntries(Object.entries(e!=null?e:{}).map(x));function C(u,o){function s(l,g){return Object.fromEntries(Object.entries(e!=null?e:{}).map(function(v){var j=v[0],m=v[1],w=u?u+" ":"",k=m&&m!==j?" "+m:"";function S(A){var h,B;return!arguments.length||A===!0||!config.strictBoolChecks&&A?(h=o+j+k,B=w+h):(h="",B=u!=null?u:""),g.length&&(g=g+(h.length?" "+h:"")),l.length&&(l=l+(h.length?" "+h:"")),__assign({class:l.length?l:B,c:l.length?l:B,string:g.length?g:h,s:g.length?g:h,toString:toStringError},s(B,h))}return S.string=S.s=o+j+k,S.class=S.c=w+S.string,S.toString=toStringError,[j,S]}))}return s("","")}var d=Object.fromEntries(Object.entries(r!=null?r:{}).map(function(u){var o=u[0],s=u[1],l=s&&s!==o?" "+s:"",g=t?t+y():"";function v(){for(var j=[],m=0;m<arguments.length;m++)j[m]=arguments[m];var w="";j.length&&(w+=composeClass(config,O,g+o+p(),j));var k=g+o+l+(w.length?" "+w:"");return{class:k,c:k,string:w,s:w,toString:toStringError}}return v.string=v.s="",v.class=v.c=g+o+l+v.string,v.toString=toStringError,Object.assign(v,C(v.c,g+o+p())),[o,v]})),P=t!=null?t:"",I=b!=null?b:"",R=t?t+p():"";function c(){for(var u=[],o=0;o<arguments.length;o++)u[o]=arguments[o];var s=I;u.length&&(s+=(s.length?" ":"")+composeClass(config,O,R,u));var l=P+(t&&s.length?" ":"")+s;return{class:l,c:l,string:s,s:s,toString:toStringError}}return c.class=c.c=P+(t&&b?" ":"")+I,c.string=c.s=I,c.toString=toStringError,Object.defineProperty(c,"name",{value:t,writable:!1}),t&&Object.defineProperty(c,t,{value:c,writable:!1}),Object.assign(c,d),Object.assign(c,C(c.c,t?t+p():"")),c}exports.default=enss;function composeClass(a,r,e,i){for(var n="",y=0,p=i;y<p.length;y++){var f=p[y];if(f){if(typeof f=="string"||f instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if(Object.prototype.hasOwnProperty.call(f,"class")&&Object.prototype.hasOwnProperty.call(f,"c")&&Object.prototype.hasOwnProperty.call(f,"string")&&Object.prototype.hasOwnProperty.call(f,"s")){var N=f.string;n+=(N==null?void 0:N.length)?" "+N:""}else{var t=void 0;if(Array.isArray(f))t=f.map(function(P){return[P,!0]});else{try{t=Object.entries(f)}catch(P){t=null}if(!(t==null?void 0:t.length))throw new Error("ENSS Error: Invalid input ".concat(JSON.stringify(f),"."))}for(var b=0,x=t;b<x.length;b++){var D=x[b],O=D[0],C=D[1];if(C===!0||!a.strictBoolChecks&&C){n+=" "+e+O.trim();var d=r==null?void 0:r.get(O);(d==null?void 0:d.length)&&(typeof d=="string"||d instanceof String)&&(n+=" "+d.trim())}}}}}return n.slice(1)}exports.composeClass=composeClass;function omitEnumReverseMappings(a){return a&&Object.fromEntries(Object.entries(a).filter(function(r){var e=r[0];return!Number.isInteger(Number(e))}).map(function(r){var e=r[0],i=r[1];return[e,Number.isInteger(Number(i))?null:i]}))}exports.omitEnumReverseMappings=omitEnumReverseMappings;function extractNameEnumData(a,r){var e,i=null,n=null;if(a&&typeof a=="object"){var y=Object.entries(a);if(y.length>1)throw new Error("ENSS Error: Invalid name enum provided; should have at most 1 field.");y.length===1&&(e=y[0],i=e[0],n=e[1])}if(i&&r&&typeof r=="object"){var p=Object.prototype.hasOwnProperty.call(r,i)&&r[i];p&&(n=(n?n+" ":"")+p)}return[i,n]}exports.extractNameEnumData=extractNameEnumData,enss.configure=function(a){Object.assign(config,a===null?defaultConfig:a)};
