"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(r){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveNSSArg=void 0;var defaultConfig={elementSeparator:"-",conditionalSeparator:"--"},config=__assign({},defaultConfig);function toStringError(){throw new Error("Don't coerce to string directly; use .c or .s (aliases: .cls .str)")}function nss(r,e,n,s){var i,d=function(){return config.elementSeparator},c=function(){return config.conditionalSeparator};if(r=omitEnumReverseMappings(r),e=omitEnumReverseMappings(e),n=omitEnumReverseMappings(n),typeof s=="function"){var S={};s=(i=s(S))!==null&&i!==void 0?i:S}var m=extractNameEnumData(r,s),a=m[0],g=m[1];function u(o){var t=o[0],p=o[1],O=l.get(t);return O?!p||p===t?[t,O]:[t,p+" "+O]:(typeof p=="string"&&p.length?l.set(t,p):l.set(t,null),[t,p])}var j=Object.entries(s!=null?s:[]),l=new Map(j);a&&l.set(a,g!=null?g:null),e=Object.fromEntries(Object.entries(e!=null?e:{}).map(u)),n=Object.fromEntries(Object.entries(n!=null?n:{}).map(u));function _(o,t){function p(){return Object.fromEntries(Object.entries(n!=null?n:{}).map(function(O){var h=O[0],v=O[1],w=o?o+" ":"",x=v&&v!==h?" "+v:"";function b(C){var k,A,P;return!arguments.length||C?(P=!1,k=t+h+x,A=w+k):(P=!0,k="",A=o!=null?o:""),__assign(__assign({__nss__:!0},P?{__nssCondOff__:!0}:{}),{name:h,cls:A,c:A,str:k,s:k,toString:toStringError})}return b.__nss__=!0,b.str=b.s=t+h+x,b.cls=b.c=w+b.str,b.toString=toStringError,Object.defineProperty(b,"name",{value:h,writable:!1}),[h,b]}))}return p()}var B=Object.fromEntries(Object.entries(e!=null?e:{}).map(function(o){var t=o[0],p=o[1],O=p&&p!==t?p:"",h=a?a+d():"";function v(){for(var b=[],C=0;C<arguments.length;C++)b[C]=arguments[C];return constructNSSObject({builder:v,mappings:l,baseName:t,baseClass:h+t,separator:c(),afterClass:O,values:b})}v.__nss__=!0,v.str=v.s=O;var w=h+t,x=w.length&&v.str.length?" ":"";return v.cls=v.c=w+x+v.str,v.toString=toStringError,v.props=function(){for(var b=[],C=0;C<arguments.length;C++)b[C]=arguments[C];return constructNSSObject({builder:v,mappings:l,baseName:t,baseClass:h+t,separator:c(),afterClass:O,values:b,strictBoolChecks:!0})},Object.assign(v,_(v.c,h+t+c())),Object.defineProperty(v,"name",{value:t,writable:!1}),[t,v]})),N=a!=null?a:"",y=g!=null?g:"";function f(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return constructNSSObject({builder:f,mappings:l,baseName:a!=null?a:"",baseClass:N,separator:c(),afterClass:y,values:o})}return f.__nss__=!0,f.cls=f.c=N+(a&&g?" ":"")+y,f.str=f.s=y,f.toString=toStringError,f.props=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return constructNSSObject({builder:f,mappings:l,baseName:a!=null?a:"",baseClass:N,separator:c(),afterClass:y,values:o,strictBoolChecks:!0})},Object.defineProperty(f,"name",{value:a,writable:!1}),a&&Object.defineProperty(f,a,{value:f,writable:!1}),Object.assign(f,B),Object.assign(f,_(f.c,a?a+c():"")),f}exports.default=nss;function resolveNSSArg(r,e){var n=e,s=n.__nss__,i=n.__nssCondOff__,d=n.name;if(s){var c=r[d];return c?i?c(!1).str:c.str:e.str}return e}exports.resolveNSSArg=resolveNSSArg;function constructNSSObject(r){var e=r.builder,n=r.mappings,s=r.baseName,i=r.baseClass,d=r.separator,c=r.afterClass,S=r.values,m=r.strictBoolChecks,a=m===void 0?!1:m;s=s!=null?s:"";var g,u=c;if(S.length){var j=composeClass({builder:e,mappings:n,prefix:i+(s?d:""),values:S,strictBoolChecks:a});g=u.length&&j.length?" ":"",u+=g+j}var l=i;return g=l.length&&u.length&&u[0]!==" "?" ":"",l+=g+u,{__nss__:!0,name:s,cls:l,c:l,str:u,s:u,toString:toStringError}}function composeClass(r){for(var e,n=r.builder,s=r.mappings,i=r.prefix,d=r.values,c=r.strictBoolChecks,S=c===void 0?!1:c,m="",a=0,g=d;a<g.length;a++){var u=g[a];if(u){if(typeof u=="string"||u instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if((e=u)===null||e===void 0?void 0:e.__nss__){var j=resolveNSSArg(n,u);m+=(j==null?void 0:j.length)?" "+j:""}else{var l=void 0;if(Array.isArray(u))l=u.map(function(t){return[t,!0]});else{try{l=Object.entries(u)}catch(t){l=null}if(!(l==null?void 0:l.length))throw new Error("NSS Error: Invalid input ".concat(JSON.stringify(u),"."))}for(var _=0,B=l;_<B.length;_++){var N=B[_],y=N[0],f=N[1];if(f===!0||!S&&f){m+=" "+i+y;var o=s==null?void 0:s.get(y);(o==null?void 0:o.length)&&(typeof o=="string"||o instanceof String)&&(m+=" "+o)}}}}}return m.slice(1)}function omitEnumReverseMappings(r){return r&&Object.fromEntries(Object.entries(r).filter(function(e){var n=e[0];return!Number.isInteger(Number(n))}).map(function(e){var n=e[0],s=e[1];return[n,Number.isInteger(Number(s))?null:s]}))}function extractNameEnumData(r,e){var n,s=null,i=null;if(r&&typeof r=="object"){var d=Object.entries(r);if(d.length>1)throw new Error("NSS Error: Invalid name enum provided; should have at most 1 field.");d.length===1&&(n=d[0],s=n[0],i=n[1])}if(s&&e&&typeof e=="object"){var c=Object.prototype.hasOwnProperty.call(e,s)&&e[s];c&&(i=(i?i+" ":"")+c)}return[s,i]}nss.configure=function(r){Object.assign(config,r===null?defaultConfig:r)};
