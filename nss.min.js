"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(a){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[i]=r[i])}return a},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveNSSArg=void 0;var defaultConfig={elementSeparator:"-",conditionalSeparator:"--"},config=__assign({},defaultConfig);function toStringError(){throw new Error("Do not coerce to string directly; use .c (.class) or .s (.string)")}function nss(a,r,e,n){var i,h=function(){return config.elementSeparator},u=function(){return config.conditionalSeparator};if(a=omitEnumReverseMappings(a),r=omitEnumReverseMappings(r),e=omitEnumReverseMappings(e),typeof n=="function"){var x={};n=(i=n(x))!==null&&i!==void 0?i:x}var d=extractNameEnumData(a,n),s=d[0],v=d[1];function N(g){var t=g[0],o=g[1],l=y.get(t);return l?!o||o===t?[t,l]:[t,o+" "+l]:(typeof o=="string"&&o.length?y.set(t,o):y.set(t,null),[t,o])}var k=Object.entries(n!=null?n:[]),y=new Map(k);s&&y.set(s,v!=null?v:null),r=Object.fromEntries(Object.entries(r!=null?r:{}).map(N)),e=Object.fromEntries(Object.entries(e!=null?e:{}).map(N));function A(g,t){function o(){return Object.fromEntries(Object.entries(e!=null?e:{}).map(function(l){var O=l[0],j=l[1],f=g?g+" ":"",P=j&&j!==O?" "+j:"";function _(m){var b,w,p;return!arguments.length||m?(p=!1,b=t+O+P,w=f+b):(p=!0,b="",w=g!=null?g:""),__assign(__assign({__nss__:!0},p?{__nssCondOff__:!0}:{}),{name:O,class:w,c:w,string:b,s:b,toString:toStringError})}return _.__nss__=!0,_.string=_.s=t+O+P,_.class=_.c=f+_.string,_.toString=toStringError,Object.defineProperty(_,"name",{value:O,writable:!1}),[O,_]}))}return o()}var I=Object.fromEntries(Object.entries(r!=null?r:{}).map(function(g){var t=g[0],o=g[1],l,O=o&&o!==t?o:"",j=s?s+h():"";function f(){for(var _=[],m=0;m<arguments.length;m++)_[m]=arguments[m];var b=O;if(_.length){var w=composeClass(f,y,j+t+u(),_);l=b.length&&w.length?" ":"",b+=l+w}var p=j+t;return l=p.length&&b.length&&b[0]!==" "?" ":"",p+=l+b,{__nss__:!0,name:t,class:p,c:p,string:b,s:b,toString:toStringError}}f.__nss__=!0,f.string=f.s=O;var P=j+t;return l=P.length&&f.string.length?" ":"",f.class=f.c=P+l+f.string,f.toString=toStringError,Object.assign(f,A(f.c,j+t+u())),Object.defineProperty(f,"name",{value:t,writable:!1}),[t,f]})),S=s!=null?s:"",C=v!=null?v:"",B=s?s+u():"";function c(){for(var g=[],t=0;t<arguments.length;t++)g[t]=arguments[t];var o=C;if(g.length){var l=composeClass(c,y,B,g),O=o.length&&l.length?" ":"";o+=O+l}var j=S+(s&&o.length?" ":"")+o;return{__nss__:!0,name:s,class:j,c:j,string:o,s:o,toString:toStringError}}return c.__nss__=!0,c.class=c.c=S+(s&&v?" ":"")+C,c.string=c.s=C,c.toString=toStringError,Object.defineProperty(c,"name",{value:s,writable:!1}),s&&Object.defineProperty(c,s,{value:c,writable:!1}),Object.assign(c,I),Object.assign(c,A(c.c,s?s+u():"")),c}exports.default=nss;function resolveNSSArg(a,r){var e=r,n=e.__nss__,i=e.__nssCondOff__,h=e.name;if(n){var u=a[h];return u?i?u(!1).string:u.string:r.string}return r}exports.resolveNSSArg=resolveNSSArg;function composeClass(a,r,e,n){for(var i,h="",u=0,x=n;u<x.length;u++){var d=x[u];if(d){if(typeof d=="string"||d instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if((i=d)===null||i===void 0?void 0:i.__nss__){var s=resolveNSSArg(a,d);h+=(s==null?void 0:s.length)?" "+s:""}else{var v=void 0;if(Array.isArray(d))v=d.map(function(C){return[C,!0]});else{try{v=Object.entries(d)}catch(C){v=null}if(!(v==null?void 0:v.length))throw new Error("NSS Error: Invalid input ".concat(JSON.stringify(d),"."))}for(var N=0,k=v;N<k.length;N++){var y=k[N],A=y[0],I=y[1];if(I){h+=" "+e+A;var S=r==null?void 0:r.get(A);(S==null?void 0:S.length)&&(typeof S=="string"||S instanceof String)&&(h+=" "+S)}}}}}return h.slice(1)}function omitEnumReverseMappings(a){return a&&Object.fromEntries(Object.entries(a).filter(function(r){var e=r[0];return!Number.isInteger(Number(e))}).map(function(r){var e=r[0],n=r[1];return[e,Number.isInteger(Number(n))?null:n]}))}function extractNameEnumData(a,r){var e,n=null,i=null;if(a&&typeof a=="object"){var h=Object.entries(a);if(h.length>1)throw new Error("NSS Error: Invalid name enum provided; should have at most 1 field.");h.length===1&&(e=h[0],n=e[0],i=e[1])}if(n&&r&&typeof r=="object"){var u=Object.prototype.hasOwnProperty.call(r,n)&&r[n];u&&(i=(i?i+" ":"")+u)}return[n,i]}nss.configure=function(a){Object.assign(config,a===null?defaultConfig:a)};
