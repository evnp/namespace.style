"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(r){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveNSSArg=void 0;var defaultConfig={separator:"",elementSeparator:"",conditionalSeparator:"",caseSensitiveProps:!1},config=__assign({},defaultConfig);function configure(r){Object.assign(config,r===null?defaultConfig:r)}function configElementSeparator(){var r,t;return((r=config.elementSeparator)===null||r===void 0?void 0:r.length)?config.elementSeparator:((t=config.separator)===null||t===void 0?void 0:t.length)?config.separator:"-"}function configConditionalSeparator(){var r,t;return((r=config.conditionalSeparator)===null||r===void 0?void 0:r.length)?config.conditionalSeparator:((t=config.separator)===null||t===void 0?void 0:t.length)?config.separator+config.separator:"--"}function toStringError(){throw new Error("Don't coerce to string directly; use .c or .s (aliases: .cls .str)")}function nss(r,t,s,o){var a,O=configElementSeparator(),u=configConditionalSeparator();if(r=omitEnumReverseMappings(r),t=omitEnumReverseMappings(t),s=omitEnumReverseMappings(s),typeof o=="function"){var L={};o=(a=o(L))!==null&&a!==void 0?a:L}var _=extractNameEnumData(r,o),n=_[0],p=_[1],A=Object.entries(o!=null?o:[]),j=new Map(A),f=new Map(A.map(function(l){var e=l[0];return[e.toLowerCase(),e]}));n&&(j.set(n,p!=null?p:null),f.set(n.toLowerCase(),n));function y(l){var e=l[0],c=l[1],S=j.get(e);return S?!c||c===e?[e,S]:[e,c+" "+S]:(typeof c=="string"&&c.length?(j.set(e,c),f.set(e.toLowerCase(),e)):(j.set(e,null),f.set(e.toLowerCase(),e)),[e,c])}t=Object.fromEntries(Object.entries(t!=null?t:{}).map(y)),s=Object.fromEntries(Object.entries(s!=null?s:{}).map(y));function v(l,e){return Object.fromEntries(Object.entries(s!=null?s:{}).map(function(c){var S=c[0],w=c[1],g=l?l+" ":"",x=w&&w!==S?" "+w:"";function d(k){var h,m,B;!arguments.length||k?(B=!1,h=e+S+x,m=g+h):(B=!0,h="",m=l!=null?l:"");var P=__assign(__assign({__nss__:!0},B?{__nssCondOff__:!0}:{}),{name:S,cls:m,c:m,str:h,s:h,toString:toStringError});return Object.assign(P,v(m,e)),P}return d.__nss__=!0,d.str=d.s=e+S+x,d.cls=d.c=g+d.str,d.toString=toStringError,Object.defineProperty(d,"name",{value:S,writable:!1}),[S,d]}))}var b=Object.fromEntries(Object.entries(t!=null?t:{}).map(function(l){var e=l[0],c=l[1],S=c&&c!==e?c:"",w=n?n+O:"";function g(){for(var k=[],h=0;h<arguments.length;h++)k[h]=arguments[h];var m=constructNSSObject({parent:g,mappings:j,mappingsLowercase:f,baseName:e,baseClass:w+e,separator:u,afterClass:S,values:k,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0});return Object.assign(m,v(m.c,w+e+u)),m}g.__nss__=!0,g.str=g.s=S;var x=w+e,d=x.length&&g.str.length?" ":"";return g.cls=g.c=x+d+g.str,g.toString=toStringError,g.props=function(){for(var k=[],h=0;h<arguments.length;h++)k[h]=arguments[h];var m=constructNSSObject({parent:g,mappings:j,mappingsLowercase:f,baseName:e,baseClass:w+e,separator:u,afterClass:S,values:k,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1});return Object.assign(m,v(m.c,w+e+u)),m},Object.assign(g,v(g.c,w+e+u)),Object.defineProperty(g,"name",{value:e,writable:!1}),[e,g]})),N=n!=null?n:"",C=p!=null?p:"";function i(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];var c=constructNSSObject({parent:i,mappings:j,mappingsLowercase:f,baseName:n!=null?n:"",baseClass:N,separator:u,afterClass:C,values:l,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0});return Object.assign(i,b),Object.assign(c,v(i.c,n?n+u:"")),c}return i.__nss__=!0,i.cls=i.c=N+(n&&p?" ":"")+C,i.str=i.s=C,i.toString=toStringError,i.props=function(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];var c=constructNSSObject({parent:i,mappings:j,mappingsLowercase:f,baseName:n!=null?n:"",baseClass:N,separator:u,afterClass:C,values:l,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1});return Object.assign(i,b),Object.assign(c,v(i.c,n?n+u:"")),c},Object.defineProperty(i,"name",{value:n,writable:!1}),n&&Object.defineProperty(i,n,{value:i,writable:!1}),Object.assign(i,b),Object.assign(i,v(i.c,n?n+u:"")),i}exports.default=nss;function resolveNSSArg(r,t){var s=t,o=s.__nss__,a=s.__nssCondOff__,O=s.name;if(o){var u=r[O];return u?a?u(!1).str:u.str:t.str}return t}exports.resolveNSSArg=resolveNSSArg;function constructNSSObject(r){var t=r.parent,s=r.mappings,o=r.mappingsLowercase,a=r.baseName,O=r.baseClass,u=r.separator,L=r.afterClass,_=r.values,n=r.caseSensitive,p=r.strictBoolChecks,A=r.acceptArbitraryStrings;if(!n&&s.size!=o.size){var j=Array.from(s.keys()),f=[];Array.from(s.keys()).find(function(l){return f=j.filter(function(e){return e.toLowerCase()===l.toLowerCase()}),f.length>1});var y=f.length?f.map(function(l){return'"'.concat(l,'"')}).join(", ")+" ":"";throw new Error("You're using multiple class names ".concat(y,"that are identical ")+"apart from casing; this causes ambiguity when using .props(...)")}a=a!=null?a:"";var v,b=L;if(_.length){var N=composeClass({parent:t,mappings:s,mappingsLowercase:o,prefix:O+(a?u:""),values:_,caseSensitive:n,strictBoolChecks:p,acceptArbitraryStrings:A});v=b.length&&N.length?" ":"",b+=v+N}var C=O;v=C.length&&b.length&&b[0]!==" "?" ":"",C+=v+b;var i={__nss__:!0,name:a,cls:C,c:C,str:b,s:b,toString:toStringError};return i}function composeClass(r){for(var t,s=r.parent,o=r.mappings,a=r.mappingsLowercase,O=r.prefix,u=r.values,L=r.caseSensitive,_=r.strictBoolChecks,n=r.acceptArbitraryStrings,p="",A=0,j=u;A<j.length;A++){var f=j[A];if(f){if(typeof f=="string"||f instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if((t=f)===null||t===void 0?void 0:t.__nss__){var y=resolveNSSArg(s,f);p+=(y==null?void 0:y.length)?" "+y:""}else{var v=void 0;if(Array.isArray(f))v=f.map(function(c){return[c,!0]});else{try{v=Object.entries(f)}catch(c){v=null}if(!(v==null?void 0:v.length))throw new Error("NSS Error: Invalid input ".concat(JSON.stringify(f),"."))}for(var b=0,N=v;b<N.length;b++){var C=N[b],i=C[0],l=C[1];if(l===!0||!_&&l){if(!n){if(L){if(!o.has(i))continue}else if(!a.has(i.toLowerCase()))continue}L?p+=" "+O+i:p+=" "+O+a.get(i.toLowerCase());var e=L?o.get(i):o.get(a.get(i.toLowerCase()));(e==null?void 0:e.length)&&(typeof e=="string"||e instanceof String)&&(p+=" "+e)}}}}}return p.slice(1)}function omitEnumReverseMappings(r){return r&&Object.fromEntries(Object.entries(r).filter(function(t){var s=t[0];return!Number.isInteger(Number(s))}).map(function(t){var s=t[0],o=t[1];return[s,Number.isInteger(Number(o))?null:o]}))}function extractNameEnumData(r,t){var s,o=null,a=null;if(r&&typeof r=="object"){var O=Object.entries(r);if(O.length>1)throw new Error("NSS Error: Invalid name enum provided; should have at most 1 field.");O.length===1&&(s=O[0],o=s[0],a=s[1])}if(o&&t&&typeof t=="object"){var u=Object.prototype.hasOwnProperty.call(t,o)&&t[o];u&&(a=(a?a+" ":"")+u)}return[o,a]}nss.config=config,nss.configure=configure;
