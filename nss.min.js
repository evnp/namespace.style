"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveNSSArg=exports.isCondNSSObject=void 0;var defaultConfig={separator:"",elementSeparator:"",conditionalSeparator:"",caseSensitiveProps:!1},config=__assign({},defaultConfig);function configure(e){Object.assign(config,e===null?defaultConfig:e)}function configElementSeparator(){var e,r;return((e=config.elementSeparator)===null||e===void 0?void 0:e.length)?config.elementSeparator:((r=config.separator)===null||r===void 0?void 0:r.length)?config.separator:"-"}function configConditionalSeparator(){var e,r;return((e=config.conditionalSeparator)===null||e===void 0?void 0:e.length)?config.conditionalSeparator:((r=config.separator)===null||r===void 0?void 0:r.length)?config.separator+config.separator:"--"}function toStringError(){throw new Error("Don't coerce to string directly; use .c (alias: .cls)")}function isNSSObject(e){var r;return((r=e)===null||r===void 0?void 0:r.toString)===toStringError}function isBaseNSSObject(e){var r;return isNSSObject(e)&&e===((r=e)===null||r===void 0?void 0:r.parent)}function isElemNSSObject(e){var r=e.parent;return isBaseNSSObject(r)&&!isCondNSSObject(e)}function isCondNSSObject(e){var r=e.off;return isNSSObject(e)&&typeof r=="boolean"}exports.isCondNSSObject=isCondNSSObject;function nss(e,r,t,a){var s,f=configElementSeparator(),l=configConditionalSeparator();if(e=omitEnumReverseMappings(e),r=omitEnumReverseMappings(r),t=omitEnumReverseMappings(t),typeof a=="function"){var N={};a=(s=a(N))!==null&&s!==void 0?s:N}var k=extractBaseData(e,a),o=k[0],O=k[1],B=Object.entries(a!=null?a:[]),u=new Map(B),g=new Map(B.map(function(c){var n=c[0];return[n.toLowerCase(),n]}));o&&(u.set(o,O!=null?O:null),g.set(o.toLowerCase(),o));function m(c){var n=c[0],b=c[1],h=u.get(n);return h?!b||b===n?[n,h]:[n,b+" "+h]:(typeof b=="string"&&b.length?(u.set(n,b),g.set(n.toLowerCase(),n)):(u.set(n,null),g.set(n.toLowerCase(),n)),[n,b])}r=Object.fromEntries(Object.entries(r!=null?r:{}).map(m)),t=Object.fromEntries(Object.entries(t!=null?t:{}).map(m));function E(c,n,b){return Object.fromEntries(Object.entries(t!=null?t:{}).map(function(h){var w=h[0],x=h[1],I=(c==null?void 0:c.length)?c+" ":"",p=getMapped(w,x),A=p[0],j=p[1];function C(J){var P,D;!arguments.length||J?(D=!1,P=I+n+w+j):(D=!0,P=c);var z={off:D,cls:P,c:P,name:w,value:n+w,mapped:A,toString:toStringError,parent:b};return Object.assign(z,E(P,n,b)),z}return C.off=!1,C.cls=I+n+w+j,C.c=C.cls,C.value=n+w,C.mapped=A,C.toString=toStringError,C.parent=b,Object.defineProperty(C,"name",{value:w,writable:!1}),[w,C]}))}var y=Object.fromEntries(Object.entries(r!=null?r:{}).map(function(c){var n=c[0],b=c[1],h=(o?o+f:"")+n,w=getMapped(n,b),x=w[0],I=w[1];function p(){for(var A=[],j=0;j<arguments.length;j++)A[j]=arguments[j];return constructNSSObject({name:n,cls:h,separator:l,base:i,builder:p,mapped:x,mappings:u,mappingsLowercase:g,values:A,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0})}return p.cls=h+I,p.c=p.cls,p.value=h,p.mapped=x,p.toString=toStringError,p.parent=i,p.props=function(){for(var A=[],j=0;j<arguments.length;j++)A[j]=arguments[j];return constructNSSObject({name:n,cls:h,separator:l,base:i,builder:p,mapped:x,mappings:u,mappingsLowercase:g,values:A,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1})},Object.assign(p,E(p.c,h+l,p)),Object.defineProperty(p,"name",{value:n,writable:!1}),[n,p]})),v=o!=null?o:"",d=getMapped(o,O),L=d[0],S=d[1];function i(){for(var c=[],n=0;n<arguments.length;n++)c[n]=arguments[n];return constructNSSObject({name:v,cls:v,separator:l,base:i,builder:i,mapped:L,mappings:u,mappingsLowercase:g,values:c,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0})}return i.cls=v+S,i.c=i.cls,i.value=v,i.mapped=L,i.toString=toStringError,i.parent=i,i.props=function(){for(var c=[],n=0;n<arguments.length;n++)c[n]=arguments[n];return constructNSSObject({name:v,cls:v,separator:l,base:i,builder:i,mapped:L,mappings:u,mappingsLowercase:g,values:c,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1})},Object.defineProperty(i,"name",{value:o,writable:!1}),o&&Object.defineProperty(i,o,{value:i,writable:!1}),Object.assign(i,y),Object.assign(i,E(i.c,o?o+l:"",i)),i}exports.default=nss;function resolveNSSArg(e,r){var t;if(isNSSObject(r)){var a=e[r.name],s=a;if(!a)s=r;else if(r.off)return"";var f=s.cls,l=s.mapped;return f.slice(f.lastIndexOf(" ",f.length-((t=l==null?void 0:l.length)!==null&&t!==void 0?t:0)-2)+1)}else return null}exports.resolveNSSArg=resolveNSSArg;function constructNSSObject(e){var r=e.name,t=e.cls,a=e.separator,s=e.base,f=e.builder,l=e.mapped,N=e.mappings,k=e.mappingsLowercase,o=e.values,O=e.caseSensitive,B=e.strictBoolChecks,u=e.acceptArbitraryStrings;if(!O&&N.size!=k.size){var g=Array.from(N.keys()),m=[];Array.from(N.keys()).find(function(S){return m=g.filter(function(i){return i.toLowerCase()===S.toLowerCase()}),m.length>1});var E=m.length?m.map(function(S){return'"'.concat(S,'"')}).join(", ")+" ":"";throw new Error("You're using multiple class names ".concat(E,"that are identical ")+"apart from casing; this causes ambiguity when using .props(...)")}var y,v=l!=null?l:"";if(o.length){var d=composeClass({builder:f,mappings:N,mappingsLowercase:k,prefix:t+(t.length?a:""),values:o,caseSensitive:O,strictBoolChecks:B,acceptArbitraryStrings:u});y=v.length&&d.length?" ":"",v+=y+d}y=t.length&&v.length&&v[0]!==" "?" ":"";var L={__nss__:!0,name:r,cls:t+y+v,c:t+y+v,value:t,mapped:l,toString:toStringError,parent:s};return L}function composeClass(e){for(var r=e.builder,t=e.mappings,a=e.mappingsLowercase,s=e.prefix,f=e.values,l=e.caseSensitive,N=e.strictBoolChecks,k=e.acceptArbitraryStrings,o="",O=0,B=f;O<B.length;O++){var u=B[O];if(typeof u=="string"||u instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if(u){var g=resolveNSSArg(r,u);if(g!==null)o+=(g==null?void 0:g.length)?" "+g:"";else{var m=void 0;if(Array.isArray(u))m=u.map(function(i){return[i,!0]});else{try{m=Object.entries(u)}catch(i){m=null}if(!(m==null?void 0:m.length))throw new Error("NSS Error: Invalid input ".concat(JSON.stringify(u),"."))}for(var E=0,y=m;E<y.length;E++){var v=y[E],d=v[0],L=v[1];if(L===!0||!N&&L){if(!k){if(l){if(!t.has(d))continue}else if(!a.has(d.toLowerCase()))continue}l?o+=" "+s+d:o+=" "+s+a.get(d.toLowerCase());var S=l?t.get(d):t.get(a.get(d.toLowerCase()));(S==null?void 0:S.length)&&(typeof S=="string"||S instanceof String)&&(o+=" "+S)}}}}}return o.slice(1)}function omitEnumReverseMappings(e){return e&&Object.fromEntries(Object.entries(e).filter(function(r){var t=r[0];return!Number.isInteger(Number(t))}).map(function(r){var t=r[0],a=r[1];return[t,Number.isInteger(Number(a))?null:a]}))}function extractBaseData(e,r){var t,a=null,s=null;if(e&&typeof e=="object"){var f=Object.entries(e);if(f.length>1)throw new Error("NSS Error: Invalid name enum provided; should have at most 1 field.");f.length===1&&(t=f[0],a=t[0],s=t[1])}if(a&&r&&typeof r=="object"){var l=Object.prototype.hasOwnProperty.call(r,a)&&r[a];l&&(s=(s?s+" ":"")+l)}return[a,s]}function getMapped(e,r){var t=r!=null?r:"",a=t.length&&t!==e,s=a?t:null,f=a?" "+t:"";return[s,f]}nss.config=config,nss.configure=configure,nss.isInstance=isNSSObject,nss.isBase=isBaseNSSObject,nss.isElem=isElemNSSObject,nss.isCond=isCondNSSObject;
