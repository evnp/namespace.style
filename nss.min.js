"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(r){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}return r},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveNSSArg=void 0;var defaultConfig={separator:"",elementSeparator:"",conditionalSeparator:"",caseSensitiveProps:!1},config=__assign({},defaultConfig);function configure(r){Object.assign(config,r===null?defaultConfig:r)}function configElementSeparator(){var r,t;return((r=config.elementSeparator)===null||r===void 0?void 0:r.length)?config.elementSeparator:((t=config.separator)===null||t===void 0?void 0:t.length)?config.separator:"-"}function configConditionalSeparator(){var r,t;return((r=config.conditionalSeparator)===null||r===void 0?void 0:r.length)?config.conditionalSeparator:((t=config.separator)===null||t===void 0?void 0:t.length)?config.separator+config.separator:"--"}function toStringError(){throw new Error("Don't coerce to string directly; use .c or .s (aliases: .cls .str)")}function nss(r,t,s,n){var a,d=configElementSeparator(),f=configConditionalSeparator();if(r=omitEnumReverseMappings(r),t=omitEnumReverseMappings(t),s=omitEnumReverseMappings(s),typeof n=="function"){var N={};n=(a=n(N))!==null&&a!==void 0?a:N}var A=extractNameEnumData(r,n),o=A[0],g=A[1],L=Object.entries(n!=null?n:[]),h=new Map(L),u=new Map(L.map(function(l){var e=l[0];return[e.toLowerCase(),e]}));o&&(h.set(o,g!=null?g:null),u.set(o.toLowerCase(),o));function O(l){var e=l[0],v=l[1],y=h.get(e);return y?!v||v===e?[e,y]:[e,v+" "+y]:(typeof v=="string"&&v.length?(h.set(e,v),u.set(e.toLowerCase(),e)):(h.set(e,null),u.set(e.toLowerCase(),e)),[e,v])}t=Object.fromEntries(Object.entries(t!=null?t:{}).map(O)),s=Object.fromEntries(Object.entries(s!=null?s:{}).map(O));function p(l,e){function v(){return Object.fromEntries(Object.entries(s!=null?s:{}).map(function(y){var C=y[0],c=y[1],k=l?l+" ":"",B=c&&c!==C?" "+c:"";function b(w){var _,x,P;return!arguments.length||w?(P=!1,_=e+C+B,x=k+_):(P=!0,_="",x=l!=null?l:""),__assign(__assign({__nss__:!0},P?{__nssCondOff__:!0}:{}),{name:C,cls:x,c:x,str:_,s:_,toString:toStringError})}return b.__nss__=!0,b.str=b.s=e+C+B,b.cls=b.c=k+b.str,b.toString=toStringError,Object.defineProperty(b,"name",{value:C,writable:!1}),[C,b]}))}return v()}var S=Object.fromEntries(Object.entries(t!=null?t:{}).map(function(l){var e=l[0],v=l[1],y=v&&v!==e?v:"",C=o?o+d:"";function c(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return constructNSSObject({builder:c,mappings:h,mappingsLowercase:u,baseName:e,baseClass:C+e,separator:f,afterClass:y,values:b,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0})}c.__nss__=!0,c.str=c.s=y;var k=C+e,B=k.length&&c.str.length?" ":"";return c.cls=c.c=k+B+c.str,c.toString=toStringError,c.props=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];return constructNSSObject({builder:c,mappings:h,mappingsLowercase:u,baseName:e,baseClass:C+e,separator:f,afterClass:y,values:b,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1})},Object.assign(c,p(c.c,C+e+f)),Object.defineProperty(c,"name",{value:e,writable:!1}),[e,c]})),j=o!=null?o:"",m=g!=null?g:"";function i(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];return constructNSSObject({builder:i,mappings:h,mappingsLowercase:u,baseName:o!=null?o:"",baseClass:j,separator:f,afterClass:m,values:l,caseSensitive:!0,strictBoolChecks:!1,acceptArbitraryStrings:!0})}return i.__nss__=!0,i.cls=i.c=j+(o&&g?" ":"")+m,i.str=i.s=m,i.toString=toStringError,i.props=function(){for(var l=[],e=0;e<arguments.length;e++)l[e]=arguments[e];return constructNSSObject({builder:i,mappings:h,mappingsLowercase:u,baseName:o!=null?o:"",baseClass:j,separator:f,afterClass:m,values:l,caseSensitive:config.caseSensitiveProps,strictBoolChecks:!0,acceptArbitraryStrings:!1})},Object.defineProperty(i,"name",{value:o,writable:!1}),o&&Object.defineProperty(i,o,{value:i,writable:!1}),Object.assign(i,S),Object.assign(i,p(i.c,o?o+f:"")),i}exports.default=nss;function resolveNSSArg(r,t){var s=t,n=s.__nss__,a=s.__nssCondOff__,d=s.name;if(n){var f=r[d];return f?a?f(!1).str:f.str:t.str}return t}exports.resolveNSSArg=resolveNSSArg;function constructNSSObject(r){var t=r.builder,s=r.mappings,n=r.mappingsLowercase,a=r.baseName,d=r.baseClass,f=r.separator,N=r.afterClass,A=r.values,o=r.caseSensitive,g=r.strictBoolChecks,L=r.acceptArbitraryStrings;if(!o&&s.size!=n.size){var h=Array.from(s.keys()),u=[];Array.from(s.keys()).find(function(i){return u=h.filter(function(l){return l.toLowerCase()===i.toLowerCase()}),u.length>1});var O=u.length?u.map(function(i){return'"'.concat(i,'"')}).join(", ")+" ":"";throw new Error("You're using multiple class names ".concat(O,"that are identical ")+"apart from casing; this causes ambiguity when using .props(...)")}a=a!=null?a:"";var p,S=N;if(A.length){var j=composeClass({builder:t,mappings:s,mappingsLowercase:n,prefix:d+(a?f:""),values:A,caseSensitive:o,strictBoolChecks:g,acceptArbitraryStrings:L});p=S.length&&j.length?" ":"",S+=p+j}var m=d;return p=m.length&&S.length&&S[0]!==" "?" ":"",m+=p+S,{__nss__:!0,name:a,cls:m,c:m,str:S,s:S,toString:toStringError}}function composeClass(r){for(var t,s=r.builder,n=r.mappings,a=r.mappingsLowercase,d=r.prefix,f=r.values,N=r.caseSensitive,A=r.strictBoolChecks,o=r.acceptArbitraryStrings,g="",L=0,h=f;L<h.length;L++){var u=h[L];if(u){if(typeof u=="string"||u instanceof String)throw new Error("Do not pass strings directly; enclose in object or array");if((t=u)===null||t===void 0?void 0:t.__nss__){var O=resolveNSSArg(s,u);g+=(O==null?void 0:O.length)?" "+O:""}else{var p=void 0;if(Array.isArray(u))p=u.map(function(v){return[v,!0]});else{try{p=Object.entries(u)}catch(v){p=null}if(!(p==null?void 0:p.length))throw new Error("NSS Error: Invalid input ".concat(JSON.stringify(u),"."))}for(var S=0,j=p;S<j.length;S++){var m=j[S],i=m[0],l=m[1];if(l===!0||!A&&l){if(!o){if(N){if(!n.has(i))continue}else if(!a.has(i.toLowerCase()))continue}N?g+=" "+d+i:g+=" "+d+a.get(i.toLowerCase());var e=N?n.get(i):n.get(a.get(i.toLowerCase()));(e==null?void 0:e.length)&&(typeof e=="string"||e instanceof String)&&(g+=" "+e)}}}}}return g.slice(1)}function omitEnumReverseMappings(r){return r&&Object.fromEntries(Object.entries(r).filter(function(t){var s=t[0];return!Number.isInteger(Number(s))}).map(function(t){var s=t[0],n=t[1];return[s,Number.isInteger(Number(n))?null:n]}))}function extractNameEnumData(r,t){var s,n=null,a=null;if(r&&typeof r=="object"){var d=Object.entries(r);if(d.length>1)throw new Error("NSS Error: Invalid name enum provided; should have at most 1 field.");d.length===1&&(s=d[0],n=s[0],a=s[1])}if(n&&t&&typeof t=="object"){var f=Object.prototype.hasOwnProperty.call(t,n)&&t[n];f&&(a=(a?a+" ":"")+f)}return[n,a]}nss.config=config,nss.configure=configure;
